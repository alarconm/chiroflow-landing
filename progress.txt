# ChiroFlow Ralph Progress Log

## US-216: Telehealth schema
**Status:** COMPLETED
**Date:** 2026-01-22

### What was implemented:
1. **TelehealthProvider enum** - Defines supported video providers (Twilio, Zoom, Google Meet, Custom)

2. **TelehealthSessionStatus enum** - Tracks session lifecycle (SCHEDULED, WAITING, IN_PROGRESS, COMPLETED, NO_SHOW, CANCELLED, TECHNICAL_ISSUES)

3. **WaitingRoomStatus enum** - Waiting room states (WAITING, ADMITTED, LEFT, TIMED_OUT)

4. **TelehealthConsentType enum** - Consent types (GENERAL, HIPAA, RECORDING, STATE_SPECIFIC)

5. **ConsentStatus enum** - Consent states (PENDING, SIGNED, DECLINED, EXPIRED, REVOKED)

6. **TelehealthSession model**:
   - Links to Appointment (1:1)
   - Tracks room URL, tokens, provider
   - Timing fields (scheduled/actual start/end)
   - Quality metrics (connection, audio, video)
   - Billing support (place of service code, modifiers)
   - Patient and provider location tracking for compliance

7. **VirtualWaitingRoom model**:
   - Links to Patient and TelehealthSession
   - Tracks join/admit/leave times
   - Pre-visit checklist (camera, mic, connection checks)
   - Pre-visit questionnaire responses
   - Device/browser/connection info

8. **TelehealthConsent model**:
   - Links to Patient
   - Tracks consent type and status
   - Signature capture with audit trail
   - Expiration and revocation support
   - State-specific requirement handling

9. **SessionRecording model**:
   - Links to TelehealthSession
   - Recording URL, duration, file size
   - Retention policy with scheduled deletion
   - Processing status tracking

10. **Appointment model updates**:
    - Added `isTelehealth` boolean flag
    - Added `telehealthSession` relation

11. **Organization model updates**:
    - Added relations: telehealthSessions, virtualWaitingRooms, telehealthConsents, sessionRecordings

12. **Patient model updates**:
    - Added relations: virtualWaitingRooms, telehealthConsents

### Files modified:
- `app/prisma/schema.prisma` - Added all telehealth models, enums, and relations

### Validation:
- Prisma schema validated successfully
- Prisma client generated successfully
- TypeScript compilation passes
